{% extends 'common/base.html' %}

{% block title %} Event List {% endblock title%}

{% block content %}
<center> <h1>Events({{events_number}})</h1> </center>
<div class='container'>
    {% for event in events %}
        <div class="card">
            <div class="card-header">
            {{event}}
            </div>
            <div class="card-body">
                <h5 class="card-title">{{event.venue}}</h5>
                <li>Date: {{event.event_date}}</li>
                <li>Manager: {{event.manager}}</li>
                <li>Description: {{event.description}}</li>
                <li>Attendees: 
                    <ol>
                        {% for attendee in event.attendees.all%}
                            <li>
                                {{attendee}}
                            </li>
                        {% endfor %}
                    </ol>
                </li>
                <strong>Venue Info:</strong>
                <li>address: {{event.venue.address}}</li>
                <li>Zip code: {{event.venue.zip_code}}</li>
                <li>Phone: {{event.venue.phone}}</li>
                <li>Website: {{event.venue.web}}</li>
                <li>Email: {{event.venue.email_address}}</li>
            </div>
            <div class="card-footer text-muted">
                <a href="{% url 'update-event' event.id %}" class="btn btn-outline-secondary btn-sm">Update Event</a>
                <a href="{% url 'delete-event' event.id %}" class="btn btn-outline-danger btn-sm">Delete Event</a>
            </div>
        </div> 
        
        <br>
    {% endfor %}
    <!--
    {{events}}<br>
    Has previous_page: {{ events.has_previous }}<br>
    Has next_page: {{ events.has_next }}<br>
    Current page: {{ events.number }}<br>
    Number of pages: {{ events.paginator.num_pages}}
    -->

<nav aria-label="Page navigation example">
    <ul class="pagination justify-content-center">
        {% if events.has_previous %}
        <li class="page-item"><a href="?page=1" class="page-link">&laquo; First</a></li>
            <li class="page-item"><a href="?page={{events.previous_page_number}}" class="page-link">Previous</a></li>
        {% endif %}
        {% for i in nums %}
        <li class="page-item disabled"><a href="#" class="page-link"> {{forloop.counter}}</a></li>
        {% endfor%}

        {% if events.has_next %}
            <li class="page-item"><a class="page-link" href="?page={{events.next_page_number}}" >next</a></li>
            <li class="page-item"><a class="page-link" href="?page={{events.paginator.num_pages}}" >Last&raquo;</a></li>
        {% endif %}
    </ul>
</nav>

<br><br><br><br>    
</div>
{% endblock %}